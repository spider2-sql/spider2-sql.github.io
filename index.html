<head>
  <meta charset="utf-8">
  <meta name="description"
    content="Spider2: A Realistic and Challenging Benchmark for SQL Generation">
  <!-- <meta name="keywords" content="Reasoning-Intensive Retrieval Benchmark"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Spider2: Can Language Models Resolve Real-World SQL Generation Tasks?</title>
  <script type="module" src="https://md-block.verou.me/md-block.js"></script>


  <!-- Global site tag (gtag.js) - Google Analytics -->
<!--  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PYVRSFMDRL"></script>-->
<!--  <script>-->
<!--    window.dataLayer = window.dataLayer || [];-->

<!--    function gtag() {-->
<!--      dataLayer.push(arguments);-->
<!--    }-->

<!--    gtag('js', new Date());-->

<!--    gtag('config', 'G-PYVRSFMDRL');-->
<!--  </script>-->

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="icon" href="static/images/favicon.png">

  <link rel="stylesheet" href="./stylesheets/layout.css">
  <link rel="stylesheet" href="./stylesheets/index.css">
  <link rel="stylesheet" href="./bowe_componets/css/bootstrap.table.min.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
</head>

  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>
    <div class="navbar-menu">
      <div class="navbar-start" style="flex-grow: 1; justify-content: center;">
        <a class="navbar-item" href="https://www.xlang.ai/">
          <span class="icon">
            <i class="fas fa-home"></i>
          </span>
        </a>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">
            More Research
          </a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://yale-lily.github.io/spider">
              Spider
            </a>
            <a class="navbar-item" href="https://github.com/HKUNLP/UnifiedSKG">
              UnifiedSKG
            </a>
            <a class="navbar-item" href="https://github.com/Yushi-Hu/IC-DST">
              IC-DST
            </a>
            <a class="navbar-item" href="https://github.com/HKUNLP/icl-selective-annotation">
              Selective Annotation
            </a>
            <a class="navbar-item" href="https://lm-code-binder.github.io/">
              Binder
            </a>
            <a class="navbar-item" href="https://ds1000-code-gen.github.io/">
              DS-1000
            </a>
            <a class="navbar-item" href="https://instructor-embedding.github.io/">
              Instructor
            </a>
            <a class="navbar-item" href="https://text-to-reward.github.io/">
              Text2Reward
            </a>
            <a class="navbar-item" href="https://github.com/xlang-ai/OpenAgents">
              OpenAgents
            </a>
            <a class="navbar-item" href="https://github.com/OpenLemur/lemur">
              Lemur-70B
            </a>
            <a class="navbar-item" href="https://arks-codegen.github.io/">
              ARKS
            </a>
            <a class="navbar-item" href="https://brightbenchmark.github.io/">
              BRIGHT
            </a>
            <a class="navbar-item" href="https://os-world.github.io/">
              OSWorld
            </a>
              <a class="navbar-item" href="https://spider2-v.github.io/">
              Spider2-V
            </a>
          </div>
        </div>
      </div>

    </div>
  </nav>

<!--<section class="hero">-->
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <h1 class="title is-1 publication-title">
              Spider2: A Realistic and Challenging Benchmark for SQL Generation<br>
          </h1>

        </div>
      </div>
    </div>



<!--  </section>-->

<!-- <div class="columns is-centered">
        <div class="is-size-5 publication-authors">
          <span class="author-block">
            <a href="https://hongjin-su.github.io/">Hongjin Su</a><sup>1</sup>,</span>
        </div>
        </div> -->

<div class="columns is-centered">
        <div class="is-size-5 publication-authors">
          <!-- <span class="author-block">
            <a href="https://openreview.net/profile?id=~Han-yu_Wang1">Han-yu Wang</a><sup>1</sup>,</span> -->
          <!-- <span class="author-block">
            <a href="https://taoyds.github.io/">Tao Yu</a><sup>1</sup></span> -->
        </div>
        </div>

<div class="columns is-centered">
        <div class="is-size-5 publication-authors">
          <span class="author-block">The University of Hong Kong</span>
        </div>
    </div>

            <div class="column has-text-centered">
              <div class="publication-links">
                <!-- PDF Link. -->
                <!--                <span class="link-block">-->
                <!--                  <a href="https://arxiv.org/pdf/2011.12948" class="external-link button is-normal is-rounded is-dark">-->
                <!--                    <span class="icon">-->
                <!--                      <i class="fas fa-file-pdf"></i>-->
                <!--                    </span>-->
                <!--                    <span>Paper</span>-->
                <!--                  </a>-->
                <!--                </span>-->
                <span class="link-block">
                  <a href="https://arxiv.org/abs/2407.12883" class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="ai ai-arxiv"></i>
                    </span>
                    <span>Paper</span>
                  </a>
                </span>
                <!-- Video Link. -->
                <!--                <span class="link-block">-->
                <!--                  <a href="https://www.youtube.com/watch?v=MrKrnHhk8IA"-->
                <!--                    class="external-link button is-normal is-rounded is-dark">-->
                <!--                    <span class="icon">-->
                <!--                      <i class="fab fa-youtube"></i>-->
                <!--                    </span>-->
                <!--                    <span>Video</span>-->
                <!--                  </a>-->
                <!--                </span>-->
                <!-- Code Link. -->
                <span class="link-block">
                  <a href="https://github.com/xlang-ai/Spider2"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-github"></i>
                    </span>
                    <span>Code</span>
                  </a>
                </span>
                <!-- Doc. -->
<!--                <span class="link-block">-->
<!--                  <a href="https://timothyxxx.github.io/OSWorld/"-->
<!--                    class="external-link button is-normal is-rounded is-dark">-->
<!--                    <span class="icon">-->
<!--                      <i class="far fa-bookmark"></i>-->
<!--                    </span>-->
<!--                    <span>Doc</span>-->
<!--                  </a>-->
<!--                </span>-->
                <!-- Dataset Link. -->
                <span class="link-block">
                  <a href="https://huggingface.co/datasets/xlangai/Spider2"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="far fa-images"></i>
                    </span>
                    <span>Data</span>
                  </a>
                </span>
                <!-- Data Viewer. -->
<!--                <span class="link-block">-->
<!--                  <a href="explorer.html" target="_blank" class="external-link button is-normal is-rounded is-dark">-->
<!--                    <span class="icon">-->
<!--                      <i class="fa fa-desktop"></i>-->
<!--                    </span>-->
<!--                    <span>Data Viewer</span>-->
<!--                  </a>-->
<!--                </span>-->
                <!-- Slides Link. -->
<!--                <span class="link-block">-->
<!--                  <a href="https://docs.google.com/presentation/d/1-r889Nb9n7SeZqrj-ryNqJLoMzp7aGNU2ihO8nUdEcE/edit?usp=sharing"-->
<!--                    target="_blank" class="external-link button is-normal is-rounded is-dark">-->
<!--                    <span class="icon">-->
<!--                      <i class="fab fa-google"></i>-->
<!--                    </span>-->
<!--                    <span>Slides</span>-->
<!--                  </a>-->
<!--                </span>-->
                <!-- Twitter Link. -->
                <span class="link-block">
                  <a href="https://x.com/hongjin_su/status/1814299949326311626" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-twitter"></i>
                    </span>
                    <span>Twitter</span>
                  </a>
                </span>

                <!-- <span class="link-block">
                <a href="https://huggingface.co/spaces/mteb/leaderboard?task=retrieval&language=bright"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fa fa-book"></i>
                  </span>
                  <span>MTEB</span>
                  </a>
              </span> -->
                <!-- Discord Link. -->
<!--                <span class="link-block">-->
<!--                  <a href="https://discord.gg/4Gnw7eTEZR" target="_blank"-->
<!--                    class="external-link button is-normal is-rounded is-dark">-->
<!--                    <span class="icon">-->
<!--                      <i class="fab fa-discord"></i>-->
<!--                    </span>-->
<!--                    <span>Discord</span>-->
<!--                  </a>-->
<!--                </span>-->

              </div>
            </div>

            <section class="section">
              <div class="container">
                  <div class="columns is-centered">
                      <div class="column is-three-quarters">
                          <h2 class="title is-3">Abstract</h2>
                          <p class="content">
                            SQL is widely used to build modern data stacks and interact with databases (DBs) for complex data engineering tasks. 
                            To facilitate human-data interaction, text-to-SQL has become a widely researched task aimed at converting human natural language intentions into executable SQL on DBs. 
                            In real industrial development, SQL generation encounters challenges due to complex database schemas and intricate SQL logic, addressing a wide range of real-world scenarios. 
                            We introduce Spider2, a realistic and challenging benchmark for SQL generation. This benchmark includes 600 examples across diverse SQL generation scenarios. 
                            We collected enterprise-grade databases across various fields, with schemas that are both complex and extensive. 
                            We gathered high-quality and complex SQL queries from open-source websites and professional forums, which were then manually rewritten and annotated.
                            We also proposed the project-level SQL generation tasks based on real data transformation projects.
                            To accommodate the development of the Code Agent, we provide the Spider2-World setting for almost all examples of Spider2, which differs from traditional text-to-SQL. 
                            In this setting, the method must autonomously explore the database and interface, interact using code, and obtain the final answer.
                            Spider2 bridges the gap for traditional text-to-SQL and provides valuable data resources for code generation in the LLM era and for the development of general code agents.
                          </p>
                      </div>
                  </div>
              </div>
          </section>



  <div class="cover" id="contentCover">
     <div class="container">
        <div class="row">
           <div class="col-md-6">
              <div class="infoCard">
                 <div class="infoBody">
                    
                  
                  <div class="infoHeadline">
                    <h2>News</h2>
                 </div>

                  
                 <style>
                  .scroll-container {
                      max-height: 400px; /* 设置容器的最大高度 */
                      overflow-y: auto; /* 添加垂直滚动条 */
                  }
                  </style>
                  
                  <div class="scroll-container">  
                      <div class="card card-outline-secondary mb-4" style="text-align: left;">                      
                          <div class="card-body" style="background-color: #F1F6F9;">  
                            <ul style="padding-left: 0;">
                                 <li style="list-style-type: none;"><span style="background-color: #22A699; color: white; padding: 2px 4px; border-radius: 5px;"><strong style="color: #FFE7CE">Aug. 25, 2024:</strong></span>We released a subset of Spider2 to allow users early access. The full dataset and the paper will be released in two weeks. Stay tuned! 🤗</li>
                               </li>  
                            </ul>  
                        </div>  
                    </div>  
                  </div>



                  <div class="infoHeadline">
                       <h2>Why Spider2?</h2>
                    </div>


                    <p align="left">
                    <div class="left"> We introduced Spider2 to address the challenges faced by SQL generation in real industrial development. We collected enterprise-grade databases across various fields, with schemas that are both complex and extensive. We gathered high-quality SQL queries from open-source websites and professional forums, which were then manually rewritten and annotated.
                    </div>



                    <div class="infoHeadline">
                      <h2>Settings</h2>
                    </div>
                    
                    <p align="left"> 
                      To meet the diverse research needs, we set up Spider2 with two settings. Most SQLs in these two settings overlap.
                    </p>
                    
                    <p align="left">
                      <strong>Spider2: Traditional Text2SQL Setting.</strong> Focusing on Text2SQL, with detailed database metadata.
                    </p>
                    
                    <p align="left">
                      <strong>Spider2-World: Code agent setting.</strong> SQL generation in a real-world setting requires automatically exploring complex databases, using Python, SQL, and command-line tools. Project-level Text-to-SQL task is also involved in this setting.
                    </p>
                    <img src="images/Spider2.png" alt="test image" width="550">
                    

                    <div class="infoHeadline">
                       <h2>Spider2</h2>
                    </div>
                    <p align="left">
                    <div class="left">
                     <span style="white-space: pre-line">Spider2 is a realistic and challenging Text-to-SQL dataset, significantly more difficult and closer to real-world scenarios than any previous Text2SQL benchmarks.</span><br>
<!--                       <a class="btn actionBtn" href="https://brightbenchmark.github.io/">Paper</a>-->
<!--                       <a class="btn actionBtn" href="https://github.com/xlang-ai/bright">Code</a>-->
<!--                       <a class="btn actionBtn" href="https://huggingface.co/datasets/xlangai/BRIGHT">Data</a>-->
<!--                       <a class="btn actionBtn" href="https://huggingface.co/datasets/xlangai/BRIGHT">Twitter</a>-->
                    </div>
                    </p>

                    <div class="infoHeadline">
                      <h2>Spider2-World</h2>
                    </div>
                    
                    <p align="left">
                      Spider2-World is a challenging code generation benchmark that requires writing SQL (primarily), Python, and Command Line commands to solve problems. 😊
                    </p>
                    
                    <p align="left">
                      <strong>Query-level Task:</strong> we provide the Spider2-World setting for almost all examples of Spider2, which differs from traditional text-to-SQL. The most distinctive feature is that it doesn't provide predefined schema information; the methods need to explore the database automatically and interactively write SQL. (Somewhat similar to the setting in Intercode)
                    </p>
                    
                    <p align="left">
                      <strong>Project-level Task:</strong> We also propose a new novel SQL generation task based on the DBT project, which is a highly realistic SQL generation scenario commonly used in industry development, requiring the completion of a complex data transformation task. (Somewhat similar to the setting in SWE-Bench.)
                    </p>
                    

<!--                     <div class="infoHeadline">-->
<!--                       <h2>Data Examples</h2>-->
<!--                    </div>-->
<!--                    <p align="left">-->
<!--                    <div class="left"> Some examples look like the following:-->
<!--                    </div>-->
<!--                    </p>-->
<!--                    <img src="images/bright_examples.png" alt="test image" width="600">-->

                    <div class="infoHeadline">
                       <h2>Have Questions?</h2>
                    </div>
                    <p align="left">
                    <div class="left">Ask us questions at our <a href="https://github.com/xlang-ai/Spider2/issues">Github issues page</a> or contact <a href="https://lfy79001.github.io/">Fangyu Lei</a>,  <a href="https://chenjix.github.io/">Jixuan Chen</a> or  <a href="https://rhythmcao.github.io/">Ruisheng Cao</a> for more information.
                    </div>
                 </div>
              </div>
           </div>
              <div class="container-t">
                <div class="row">
                  <div class="col-md-6">
                    <div class="infoCard">
                      <div class="infoBody">
                        <div class="infoHeadline">
                           <h2>Leaderboard</h2>
                        </div>
                        <div class="tabs is-centered example_lst">
                          <ul>
                            <li class="is-active"><a title="Spider2">Spider2</a></li>
<!--                            <li><a title="LLM reasoning">LLM reasoning</a></li>-->
<!--                            <li><a title="Reranking">Reranking</a></li>-->
                            <li><a title="Spider2-World">Spider2-World</a></li>
                          </ul>
                        </div>
                        <script type="text/javascript">
                          document.querySelectorAll(".example_lst li").forEach(e => {
                            e.addEventListener("click", Click_1)
                          })

                          function Click_1(eve) {
                            const iTxt = eve.srcElement.innerText
                            for (let v of document.querySelectorAll(".example_lst a")) {
                              if (iTxt === v.innerText) {
                                v.parentElement.className = "is-active";
                              } else {
                                v.parentElement.className = "";
                              }
                            }
                            for (let block of document.getElementsByClassName('lib_examples')) {
                              block.style.display = (block.title === iTxt) ? 'block' : 'none';
                            }
                          }

                        </script>

                        <div title="Spider2" class="lib_examples" id="BoardPanel1" style="display: block;">
                           <md-block>
                            We report the score from <a href="https://github.com/xlang-ai/Spider2/tree/main/Spider2/evaluation_suite">Spider2 evaluation suite</a>. <br>
                            In this setting, <a href="https://github.com/xlang-ai/Spider2/tree/main/Spider2/databases/bigquery/metadata">database metadata</a> and <a href="https://github.com/xlang-ai/Spider2/tree/main/Spider2/external_information">external information</a> can be used.<br>
                            <span style="color: red;">Note</span> that the method using the `plan` and `gold SQL` fields will not appear on this leaderboard. <br>
                            It only shows the Tiny Version with 133 examples (20% of the full dataset).
                          </md-block>
                          <table class="table performanceTable">
                            <tr>
                              <th>Rank</th>
                              <th>Method</th>
<!--                              <th>Details</th>-->
                              <th>Score</th>
                            </tr>

                <!-- <tr>
                   <td>
                      <p>1</p>
                      <span class="date label label-default">July 11, 2024</span>
                   </td>
                          <td style="word-break:break-word;">
                            <a class="link" href="https://www.staff.city.ac.uk/~sbrp622/papers/foundations_bm25_review.pdf">BM25</a>, with <a class="link" href="https://openai.com/index/gpt-4/">gpt-4-0125-preview</a> reasoning
                            <p style="font-size: 15;"> <i> Microsoft </i> </p>
                          </td>
                   <td><b>26.5</b></td>
                </tr> -->

                <tr>
                  <td>
                     <p>1</p>
                     <span class="date label label-default">Aug 24, 2024</span>
                  </td>
                         <td style="word-break:break-word;">
                           DailSQL + GPT-4o (with plan)
                           <p style="font-size: 15;"> <i> Baseline </i> </p>
                         </td>
                  <td><b>8.84</b></td>
               </tr>

               <tr>
                <td>
                   <p>2</p>
                   <span class="date label label-default">Aug 24, 2024</span>
                </td>
                       <td style="word-break:break-word;">
                         DailSQL + GPT-4o
                         <p style="font-size: 15;"> <i> Baseline </i> </p>
                       </td>
                <td><b>3.54</b></td>
             </tr>


                          </table>
                        </div>

                        <div title="Spider2-World" class="lib_examples" id="BoardPanel4" style="display: none;">
                          <md-block>
                            We report the score from <a href="https://github.com/xlang-ai/Spider2/tree/main/Spider2-World/evaluation_suite">Spider-World evaluation suite</a>.<br>
                            In this setting, the agent method can only use the contents of each folder to solve the problem. <br>
                            It only shows the Tiny Version with 40 examples (10% of the full dataset).
                          </md-block>

                          <!-- <div class="content has-text-justified"> -->
<!--                          <md-block>-->
<!--                            Notice: t = temperature, top-p = top-p cutoff, len = max context length-->
<!--                          </md-block>-->
                          <!-- </div> -->

                          <table class="table performanceTable">
                            <tr>
                              <th>Rank</th>
                              <th>Retriever</th>
<!--                              <th>Details</th>-->
                              <th>Score</th>
                            </tr>

                    <tr>
                       <td>
                          <p>1</p>
                          <span class="date label label-default">Aug 24, 2024</span>
                       </td>
                              <td style="word-break:break-word;">
                                Spider-Agent + GPT-4o
                                <p style="font-size: 15;"> <i> Baseline </i> </p>
                              </td>
                       <td><b>6.0</b></td>
                    </tr>

                    <tr>
                      <td>
                         <p>2</p>
                         <span class="date label label-default">Aug 24, 2024</span>
                      </td>
                             <td style="word-break:break-word;">
                               Spider-Agent + Gemini
                               <p style="font-size: 15;"> <i> Baseline </i> </p>
                             </td>
                      <td><b>4.0</b></td>
                   </tr>

                    <tr>
                      <td>
                         <p>3</p>
                         <span class="date label label-default">Aug 24, 2024</span>
                      </td>
                             <td style="word-break:break-word;">
                               CodeAct + GPT-4o
                               <p style="font-size: 15;"> <i> Baseline </i> </p>
                             </td>
                      <td><b>2.0</b></td>
                   </tr>

                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
        </div>
     </div>
  </div>

